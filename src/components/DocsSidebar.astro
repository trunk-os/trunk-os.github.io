---
import { getCollection } from 'astro:content';

const docs = await getCollection('docs');
const sortedDocs = docs
  .filter(doc => doc.data.sidebar !== false)
  .sort((a, b) => (a.data.order || 999) - (b.data.order || 999));

const { currentSlug } = Astro.props;
---

<aside class="w-64 bg-gray-50 dark:bg-gray-900 border-r border-gray-200 dark:border-gray-700 min-h-screen p-6">
  <nav class="space-y-2">
    <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">Documentation</h3>
    {sortedDocs.map((doc) => (
      <a
        href={`/docs/${doc.slug}`}
        class={`block px-3 py-2 rounded-md text-sm font-medium transition-colors ${
          currentSlug === doc.slug
            ? 'bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300'
            : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-white'
        }`}
      >
        {doc.data.title}
      </a>
    ))}
  </nav>
</aside>